(function(t){function e(e){for(var n,s,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)s=o[p],a[s]&&d.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"02fc":function(t,e,r){"use strict";var n=r("fa7c"),a=r.n(n);a.a},"0895":function(t,e,r){t.exports=r.p+"img/google.9dec7673.svg"},"0a55":function(t,e,r){"use strict";var n=r("621d"),a=r.n(n);a.a},2384:function(t,e,r){"use strict";var n=r("5019"),a=r.n(n);a.a},"2a44":function(t,e,r){},"3e30":function(t,e,r){},4678:function(t,e,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return r(e)}function i(t){var e=n[t];if(!(e+1)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return e}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="4678"},5019:function(t,e,r){},"523a":function(t,e,r){"use strict";var n=r("3e30"),a=r.n(n);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("96cf");var n=r("3040"),a=(r("cadf"),r("551c"),r("097d"),r("2b0e")),i=r("ce5b"),s=r.n(i),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"app"}},[r("router-view")],1)},c=[],u={},l=u,p=(r("a5d2"),r("2877")),d=Object(p["a"])(l,o,c,!1,null,null,null);d.options.__file="App.vue";var m=d.exports,f=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("router-view",{staticClass:"main"})],1)},v=[],b={},g=Object(p["a"])(b,h,v,!1,null,null,null);g.options.__file="LandingLayout.vue";var j=g.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",[t._v("Not Found 404")]),r("router-link",{attrs:{to:{name:"root"}}},[t._v("Go to index")])],1)},k=[],x={},w=x,_=Object(p["a"])(w,y,k,!1,null,null,null);_.options.__file="NotFound.vue";var T=_.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sign"},[t._m(0),r("div",{staticClass:"sign__content"},[r("p",{staticClass:"sign__title"},[t._v("Be more effective today!")]),r("div",{staticClass:"sign__form"},[t.isUserLoggedIn?t._e():r("router-link",{staticClass:"sign__button sign__button--icon",attrs:{to:"/sign/in"}},[r("svg",{staticClass:"sign__icon"},[r("use",{attrs:{"xlink:href":"#google"}})]),t._v("\n        Login with google\n      ")]),t.isUserLoggedIn?r("router-link",{staticClass:"sign__button",attrs:{to:"/app/timer"}},[t._v("Go to timer")]):t._e()],1)])])},E=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"sign-header"},[r("span",{staticClass:"sign-header__logo"},[t._v("TWork")])])}],S=r("c665"),D=r("aa9a"),R=r("ea05"),P=r.n(R),A="keyval-store",M="keyval",C=P.a.open(A,1,function(t){t.objectStoreNames.contains(M)||t.createObjectStore(M)}),I=function(){function t(){Object(S["a"])(this,t)}return Object(D["a"])(t,[{key:"get",value:function(t){return C.then(function(e){return e.transaction(M).objectStore(M).get(t)})}},{key:"set",value:function(t,e){return C.then(function(r){var n=r.transaction(M,"readwrite");return n.objectStore(M).put(e,t),n.complete})}},{key:"delete",value:function(t){return C.then(function(e){var r=e.transaction(M,"readwrite");return r.objectStore(M).delete(t),r.complete})}},{key:"clear",value:function(){return C.then(function(t){var e=t.transaction(M,"readwrite");return e.objectStore(M).clear(),e.complete})}},{key:"keys",value:function(){return C.then(function(t){var e=t.transaction(M),r=[],n=e.objectStore(M);return(n.iterateKeyCursor||n.iterateCursor).call(n,function(t){t&&(r.push(t.key),t.continue())}),e.complete.then(function(){return r})})}}]),t}(),$=new I,B=$,N={apiPrefix:"/api/v1",googleAuthProviderLink:"/api/v1/auth/google",isProduction:!0,WebPushVapidPublicKey:"BC-2UVu0tn7q06TbBdBGB2QqPWmU0sZLJOQL_PmIpyfJ9PR6Lyycg2bfiivBiD_V9zrrZvX-PdgJW7aYA_WlLCg"},L=r("2e94"),z=r.n(L),U=function(){function t(e){Object(S["a"])(this,t),this.resourceName=e,this.basePath=N.apiPrefix+e}return Object(D["a"])(t,[{key:"getAll",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.requestHeaders();case 3:return e=t.sent,t.next=6,z()(this.basePath,{headers:e});case 6:return r=t.sent,t.next=9,r.json();case 9:return t.abrupt("return",t.sent);case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.requestHeaders();case 3:return r=t.sent,t.next=6,z()(this.basePath+"/"+e,{headers:r});case 6:return n=t.sent,t.next=9,n.json();case 9:return a=t.sent,console.log(a),t.abrupt("return",a);case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[0,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r,n,a,i=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t.prev=1,t.next=4,this.requestHeaders();case 4:return r=t.sent,t.next=7,z()(this.basePath,{method:"POST",body:JSON.stringify(e),headers:r});case 7:return n=t.sent,t.next=10,n.json();case 10:return a=t.sent,t.abrupt("return",a);case 14:t.prev=14,t.t0=t["catch"](1),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[1,14]])}));return function(){return t.apply(this,arguments)}}()},{key:"put",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a,i,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},t.prev=1,t.next=4,this.requestHeaders();case 4:return n=t.sent,t.next=7,z()(this.basePath+"/"+e,{method:"PUT",body:JSON.stringify(r),headers:n});case 7:return a=t.sent,t.next=10,a.json();case 10:return i=t.sent,t.abrupt("return",i);case 14:t.prev=14,t.t0=t["catch"](1),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[1,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a,i,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},t.prev=1,t.next=4,this.requestHeaders();case 4:return n=t.sent,t.next=7,z()(this.basePath+"/"+e,{method:"DELETE",body:JSON.stringify(r),headers:n});case 7:return a=t.sent,t.next=10,a.json();case 10:return i=t.sent,t.abrupt("return",i);case 14:t.prev=14,t.t0=t["catch"](1),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[1,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"requestHeaders",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.get("auth-token");case 2:return e=t.sent,t.abrupt("return",{Authorization:"JWT ".concat(e),"Content-Type":"application/json"});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),Y="auth-token",W=function(){function t(){Object(S["a"])(this,t),this.currentUser=null,this.currentWorkspaceId=null,this.userApiService=new U("/users/me")}return Object(D["a"])(t,[{key:"login",value:function(){return this.fetchUser()}},{key:"logout",value:function(){return this.currentUser=null,B.delete(Y)}},{key:"fetchUser",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getToken();case 2:if(e=t.sent,!e){t.next=10;break}return t.next=6,this.userApiService.getAll();case 6:r=t.sent,this.setUser(r),t.next=11;break;case 10:throw"User is not authentificated";case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setUser",value:function(t){this.currentUser=t}},{key:"getCurrentWorkspaceId",value:function(){return this.currentUser.workspaces[0].id}},{key:"setToken",value:function(t){return B.set(Y,t)}},{key:"getToken",value:function(){return B.get(Y)}}]),t}(),F=new W,V=F,G={name:"Home",data:function(){return{isUserLoggedIn:null}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.getToken();case 2:this.isUserLoggedIn=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},H=G,q=(r("2384"),Object(p["a"])(H,O,E,!1,null,"0b35a8ac",null));q.options.__file="Index.vue";var J=q.exports,K={path:"",component:J,name:"home"},X=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-view")],1)},Q=[],Z={name:"Sign"},tt=Z,et=Object(p["a"])(tt,X,Q,!1,null,null,null);et.options.__file="Sign.vue";var rt=et.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sign"},[r("div",{staticClass:"sign"},[t._m(0),r("div",{staticClass:"sign__content"},[r("p",{staticClass:"sign__title"},[t._v("You are almost there!")]),r("div",{staticClass:"sign__form"},[r("a",{staticClass:"sign__button sign__button--icon",attrs:{href:t.googleAuthProviderLink}},[r("svg",{staticClass:"sign__icon"},[r("use",{attrs:{"xlink:href":"#google"}})]),t._v("\n          Authorize with Google\n        ")])])])])])},at=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"sign-header"},[r("span",{staticClass:"sign-header__logo"},[t._v("TWork")])])}],it=(r("0895"),{name:"SignIn",data:function(){return{googleAuthProviderLink:N.googleAuthProviderLink}}}),st=it,ot=(r("523a"),Object(p["a"])(st,nt,at,!1,null,"4c0a5d80",null));ot.options.__file="SignIn.vue";var ct=ot.exports,ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Succeess")])},lt=[],pt={mounted:function(){var t=this,e=this.$route.query.token;V.setToken(e).then(function(){V.fetchUser().then(function(){return t.$router.push({name:"timer-list"})})})}},dt=pt,mt=Object(p["a"])(dt,ut,lt,!1,null,null,null);mt.options.__file="SignInSuccess.vue";var ft=mt.exports,ht={path:"sign",component:rt,redirect:{name:"signIn"},children:[{path:"in",name:"signIn",component:ct},{path:"success",name:"success",component:ft}]},vt=r("8afe"),bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("NavigationDrawer"),r("v-content",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("router-view")],1)],1),r("v-footer",{attrs:{app:""}},[r("span",[t._v("© 2018")])])],1)},gt=[],jt=r("c93e"),yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-navigation-drawer",{attrs:{"mini-variant":t.isMini,clipped:"",fixed:"",app:"",width:140},on:{"update:miniVariant":function(e){t.isMini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},t._l(t.navigation,function(e){return r("v-list-tile",{key:e.title,on:{click:function(r){t.$router.push({name:e.route})}}},[r("v-list-tile-action",[r("v-icon",[t._v(t._s(e.ico))])],1),r("v-list-tile-content",[r("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}))],1),r("v-toolbar",{attrs:{app:"",fixed:"","clipped-left":""}},[r("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),r("v-toolbar-title",[t._v("Twork")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{flat:""}},[r("Profile")],1)],1)],1)],1)},kt=[],xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-xs-center"},[r("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":"","offset-x":""},model:{value:t.isProfileMenuOpened,callback:function(e){t.isProfileMenuOpened=e},expression:"isProfileMenuOpened"}},[r("v-avatar",{attrs:{slot:"activator",tile:!1,size:30,color:"grey lighten-4"},slot:"activator"},[r("img",{attrs:{src:t.user.imgUrl||"https://placehold.it/50x50",alt:t.user.name}})]),r("v-card",[r("v-list",[r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",[r("img",{attrs:{src:t.user.imgUrl||"https://placehold.it/50x50",alt:t.user.name}})]),r("v-list-tile-content",[r("v-list-tile-title",[t._v(t._s(t.user.name))])],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.logout()}}},[t._v("Logout")])],1)],1)],1)],1)},wt=[],_t={name:"Profile",data:function(){return{isProfileMenuOpened:!1,user:V.currentUser}},methods:{logout:function(){var t=this;V.logout().then(function(){return t.$router.push({name:"home"})})}}},Tt=_t,Ot=Object(p["a"])(Tt,xt,wt,!1,null,null,null);Ot.options.__file="Profile.vue";var Et=Ot.exports,St={components:{Profile:Et},data:function(){return{isMini:!1,drawer:!0,navigation:[{title:"Timer",ico:"alarm",route:"timer-list"},{title:"Projects",ico:"work",route:"projects"},{title:"Reports",ico:"assessment",route:"reports"}]}},mounted:function(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},beforeDestroy:function(){"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},methods:{onResize:function(){this.isMini=window.innerWidth<600}}},Dt=St,Rt=Object(p["a"])(Dt,yt,kt,!1,null,null,null);Rt.options.__file="NavigationDrawer.vue";var Pt=Rt.exports,At=r("2f62"),Mt=(r("34ef"),r("a481"),r("14b9"),function(t){for(var e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),a=new Uint8Array(n.length),i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}),Ct=Mt(N.WebPushVapidPublicKey),It=function(){function t(){Object(S["a"])(this,t),this.convertedVapidKey=Ct,this.subscriptionsApi=new U("/subscriptions")}return Object(D["a"])(t,[{key:"createSubscription",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Creating subscription"),t.next=4,navigator.serviceWorker.ready;case 4:return e=t.sent,console.log("Registration",e),t.next=8,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ct});case 8:return r=t.sent,console.log("RegistrationInfo",r),t.next=12,this.subscriptionsApi.post(r);case 12:return n=t.sent,console.log("Registration repo",n),t.abrupt("return",n);case 17:t.prev=17,t.t0=t["catch"](0),console.log("[Subscription] ",t.t0);case 20:case"end":return t.stop()}},t,this,[[0,17]])}));return function(){return t.apply(this,arguments)}}()}]),t}(),$t=new It,Bt=function(){function t(){Object(S["a"])(this,t),this.deferredPrompt=null}return Object(D["a"])(t,[{key:"initBeforeInstallPromptListener",value:function(){var t=this;console.log("Lister to beforeInstallPrompt"),window.addEventListener("beforeinstallprompt",function(e){t.deferredPrompt=e,e.preventDefault()})}},{key:"isPromptAllowed",value:function(){return!!this.deferredPrompt}},{key:"showPrompt",value:function(){return this.isPromptAllowed()?(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice):Promise.reject(null)}}]),t}(),Nt=new Bt,Lt=Nt,zt={components:{NavigationDrawer:Pt},methods:Object(jt["a"])({},Object(At["b"])({fetchTimeEntries:"timers/fetchTimeEntries",fetchProjects:"projects/fetchProjects"}),{requestNotificationPermitions:function(){Notification&&"granted"!==Notification.permission&&Notification.requestPermission().then(function(t){"granted"===t&&$t.createSubscription()})}}),created:function(){Lt.isPromptAllowed()&&Lt.showPrompt(),this.requestNotificationPermitions()},beforeRouteEnter:function(t,e,r){r(function(t){t.fetchTimeEntries(),t.fetchProjects()})}},Ut=zt,Yt=Object(p["a"])(Ut,bt,gt,!1,null,null,null);Yt.options.__file="AppLayout.vue";var Wt=Yt.exports,Ft=function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Auth checked!"),t.prev=1,!V.currentUser){t.next=6;break}return t.abrupt("return",n());case 6:return t.next=8,V.getToken();case 8:if(a=t.sent,!a){t.next=15;break}return t.next=12,V.fetchUser();case 12:return t.abrupt("return",n());case 15:return t.abrupt("return",n("/sign/in"));case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](1),console.log(t.t0),t.abrupt("return",n("/sign/in"));case 22:case"end":return t.stop()}},t,this,[[1,18]])}));return function(e,r,n){return t.apply(this,arguments)}}(),Vt=Ft,Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{lg12:"","pa-1":""}},[r("TrackingBar")],1),r("v-flex",{attrs:{lg12:"","pa-1":""}},[r("TimerList")],1)],1)},Ht=[],qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"timer-box"},t._l(t.timeEntryGroups,function(e,n,a){return r("ul",{key:a,staticClass:"timer-list"},[r("li",{staticClass:"timer-list__day-sum"},[r("span",{staticClass:"timer-list__day"},[t._v(t._s(n))]),r("span",{staticClass:"timer-list__sum"},[t._v("\n        "+t._s(t.totalGroupSpended(e))+"\n      ")])]),t._l(e,function(t){return r("TimerItem",{key:t.id,attrs:{"time-entry":t}})})],2)}))},Jt=[],Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:"","pa-2":""}},[r("v-flex",{attrs:{xs1:""}},[t.timeEntry.unsynced?r("v-btn",{attrs:{flat:"",icon:"",color:"pink"}},[r("v-icon",[t._v("cached")])],1):t._e()],1),r("v-flex",{attrs:{lg6:""}},[r("TimerItemDescription",{attrs:{initialDescription:t.timeEntry.description},on:{descriptionChanged:t.onDescriptionChanged}})],1),r("v-flex",{attrs:{lg2:"","px-2":""}},[r("TimerProjectSelect",{attrs:{initialProject:t.timeEntry.projectId},on:{projectChanged:t.onProjectChanged}})],1),r("v-flex",{attrs:{lg3:"","pt-2":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"lg-2":""}},[r("BillableButton",{attrs:{initialBillableState:t.timeEntry.billable},on:{billableChanged:t.onBillableStateChanged}})],1),r("v-flex",{attrs:{lg6:"","pt-3":""}},[r("DateTimeRangePicker",{attrs:{startedAt:t.timeEntry.startedAt,endedAt:t.timeEntry.stoppedAt},on:{rangeChanged:t.onTimeRangeChanged}},[r("span",{staticClass:"timer-list__task-period",attrs:{slot:"activator"},slot:"activator"},[t._v("\n            "+t._s(t.timeEntryPeriod)+"\n          ")])])],1),r("v-flex",{attrs:{lg2:"","pt-3":""}},[r("span",{staticClass:"timer-list__task-sum"},[t._v(" "+t._s(t.timeEntry.duration().format("hh:mm:ss",{trim:!1}))+" ")])]),r("v-flex",{attrs:{lg1:""}},[r("v-btn",{attrs:{flat:"",icon:"",color:"teal"}},[r("v-icon",[t._v("play_arrow")])],1)],1),r("v-flex",{attrs:{lg1:""}},[r("v-btn",{attrs:{flat:"",icon:"",color:"grey"},on:{click:function(e){t.destroy(t.timeEntry.id)}}},[r("v-icon",[t._v("delete")])],1)],1)],1)],1)],1)},Xt=[],Qt=r("c1df"),Zt=r.n(Qt),te=(r("4623"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.preventDefault(),t.submitDescriptionChange(e)},keydown:function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.rollbackDescriptionChange(e):null}}},[r("v-text-field",{ref:"descInput",attrs:{type:"text",placeholder:"No description"},on:{blur:function(e){t.rollbackDescriptionChange(e)}},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)}),ee=[],re={name:"TimerItemDescription",props:["initialDescription"],data:function(){return{description:this.initialDescription}},methods:{submitDescriptionChange:function(){this.$emit("descriptionChanged",this.description)},rollbackDescriptionChange:function(t){this.description=this.initialDescription,this.$refs.descInput.blur()}}},ne=re,ae=Object(p["a"])(ne,te,ee,!1,null,null,null);ae.options.__file="TimerItemDescription.vue";var ie=ae.exports,se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"timer-project-select"},[r("v-layout",{attrs:{"timer-project-select__content":""}},[r("v-flex",{attrs:{"timer-project-select__input":""}},[r("v-autocomplete",{attrs:{items:t.projects,"item-text":"name","item-value":"id","menu-props":"auto",clearable:!0,placeholder:"No project"},on:{input:t.emmitProjectChanged},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}})],1)],1)],1)},oe=[],ce=(r("c5f6"),{name:"TimerProjectSelect",props:{initialProject:{type:Number}},data:function(){return{project:this.initialProject}},computed:Object(jt["a"])({},Object(At["c"])({projects:"projects/projects"})),methods:{emmitProjectChanged:function(){this.$emit("projectChanged",this.project)}}}),ue=ce,le=Object(p["a"])(ue,se,oe,!1,null,null,null);le.options.__file="TimerProjectSelect.vue";var pe=le.exports,de=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.billableState?r("v-btn",{attrs:{flat:"",icon:"",color:"teal"},on:{click:function(e){t.unbill()}}},[r("v-icon",[t._v("attach_money")])],1):t._e(),t.billableState?t._e():r("v-btn",{attrs:{flat:"",icon:"",color:"grey"},on:{click:function(e){t.bill()}}},[r("v-icon",[t._v("money_off")])],1)],1)},me=[],fe={props:{initialBillableState:Boolean},name:"BillableButton",data:function(){return{billableState:this.initialBillableState}},watch:{initialBillableState:function(){this.billableState=this.initialBillableState}},methods:{bill:function(){this.billableState=!0,this.$emit("billableChanged",this.billableState)},unbill:function(){this.billableState=!1,this.$emit("billableChanged",this.billableState)}}},he=fe,ve=Object(p["a"])(he,de,me,!1,null,null,null);ve.options.__file="BillableButton.vue";var be=ve.exports,ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-menu",{attrs:{"close-on-content-click":!1,"full-width":"","offset-y":"",lazy:""},model:{value:t.isTimeMenuOpened,callback:function(e){t.isTimeMenuOpened=e},expression:"isTimeMenuOpened"}},[r("div",{attrs:{slot:"activator"},slot:"activator"},[t._t("activator")],2),r("div",{staticClass:"timer-list__task-time-edit-menu",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.closeTimeMenu()}}},[r("v-layout",{attrs:{row:"","justify-space-between":""}},[r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-text-field",{attrs:{rules:t.timeValidationRules,error:!t.isTimeValid(),label:"start",type:"time",step:"1"},model:{value:t.startedAtTime,callback:function(e){t.startedAtTime=e},expression:"startedAtTime"}})],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-text-field",{attrs:{rules:t.timeValidationRules,error:!t.isTimeValid(),label:"End",type:"time",step:"1"},model:{value:t.endedAtTime,callback:function(e){t.endedAtTime=e},expression:"endedAtTime"}})],1),r("v-flex",{attrs:{xs12:"",sm4:""}},[r("v-menu",{ref:"dateMenu",attrs:{"close-on-content-click":!1,"return-value":t.date,"nudge-right":40,transition:"scale-transition","min-width":"290px","full-width":"","offset-y":"",lazy:""},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.isDateMenuOpened,callback:function(e){t.isDateMenuOpened=e},expression:"isDateMenuOpened"}},[r("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",label:"Date",readonly:""},slot:"activator",model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{change:function(e){t.$refs.dateMenu.save(t.date)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1)],1)])},je=[],ye="allowEmptyBoth",ke="allowEmptyEnd",xe="checkBoth",we={props:{startedAt:{default:Zt()().milliseconds(0).toISOString(),type:String},endedAt:{default:null,type:String},rangeValidationStrategy:{type:String,default:xe,validator:function(t){return-1!==[ye,ke,xe].indexOf(t)}}},name:"DateTimeRangePicker",data:function(){var t=this;return{startedAtTime:this.startedAt&&this.$moment(this.startedAt).format("HH:mm:ss")||this.$moment().format("HH:mm:ss"),endedAtTime:this.endedAt&&this.$moment(this.endedAt).format("HH:mm:ss")||null,date:this.startedAt&&this.$moment(this.startedAt).format("YYYY-MM-DD")||this.$moment().format("YYYY-MM-DD"),isTimeMenuOpened:!1,isDateMenuOpened:!1,timeValidationRules:[function(e){return t.isTimeValid()||""}]}},watch:{isTimeMenuOpened:function(){if(!this.isTimeMenuOpened&&this.isTimeValid()){var t=this.prepareDate("startedAtTime"),e=this.prepareDate("endedAtTime"),r=t?t.toISOString():null,n=e?e.toISOString():null;if(this.startedAt==r&&this.endedAt==n)return;this.$emit("rangeChanged",{startedAt:t&&t.toISOString(),endedAt:e&&e.toISOString()})}}},methods:{isTimeValid:function(){return this.startedAtTime&&this.endedAtTime?this.prepareDate("startedAtTime").isBefore(this.prepareDate("endedAtTime")):!(!this.startedAtTime||this.rangeValidationStrategy!=ke)||this.rangeValidationStrategy==ye},prepareDate:function(t){return this[t]?this.$moment(new Date(this.date+" "+this[t])):null},closeTimeMenu:function(){this.isTimeValid()&&(this.isTimeMenuOpened=!1)}}},_e=we,Te=(r("0a55"),Object(p["a"])(_e,ge,je,!1,null,"716e13b2",null));Te.options.__file="DateTimeRangePicker.vue";var Oe=Te.exports,Ee={props:["timeEntry"],name:"TimerItem",components:{TimerItemDescription:ie,TimerProjectSelect:pe,BillableButton:be,DateTimeRangePicker:Oe},data:function(){return{menuIsActive:!1}},methods:Object(jt["a"])({},Object(At["b"])({deleteTimeEntry:"timers/deleteTimeEntry",updateTimeEntry:"timers/updateTimeEntry"}),{destroy:function(t){this.deleteTimeEntry(t)},toggleClass:function(){this.menuIsActive=!this.menuIsActive},onDescriptionChanged:function(t){this.timeEntry.description!=t&&this.updateTimeEntry(Object(jt["a"])({},this.timeEntry,{description:t}))},onTimeRangeChanged:function(t){var e=t.endedAt,r=t.startedAt;this.updateTimeEntry(Object(jt["a"])({},this.timeEntry,{startedAt:r,stoppedAt:e}))},onBillableStateChanged:function(t){this.timeEntry.billable!=t&&this.updateTimeEntry(Object(jt["a"])({},this.timeEntry.id,{billable:t}))},onProjectChanged:function(t){this.updateTimeEntry(Object(jt["a"])({},this.timeEntry,{projectId:t}))}}),computed:{timeEntryPeriod:function(){return[this.timeEntry.startedAtTime(),this.timeEntry.stoppedAtTime()].join(" - ")}}},Se=Ee,De=Object(p["a"])(Se,Kt,Xt,!1,null,null,null);De.options.__file="TimerItem.vue";var Re=De.exports,Pe={components:{TimerItem:Re},name:"TimerList",computed:Object(jt["a"])({},Object(At["c"])({stoppedTimeEntries:"timers/stoppedTimeEntries"}),{timeEntryGroups:function(){var t=this;return this.$_.groupBy(this.stoppedTimeEntries,function(e){var r=t.$moment(e.startedAt).clone().startOf("day").format("ddd, D MMM"),n=t.$moment().startOf("day").format("ddd, D MMM"),a=t.$moment().subtract(1,"day").startOf("day").format("ddd, D MMM");return r==n?"Today":r==a?"Yesterday":t.$moment(e.startedAt).format("ddd, D MMM")})}}),methods:{totalGroupSpended:function(t){var e=this.$_.sumBy(t,function(t){return t.duration()});return this.$moment.duration(e).format("hh:mm:ss",{trim:!1})}}},Ae=Pe,Me=(r("02fc"),Object(p["a"])(Ae,qt,Jt,!1,null,"3407e613",null));Me.options.__file="TimerList.vue";var Ce=Me.exports,Ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{lg12:""}},[r("v-card",{staticClass:"timer"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{lg7:"",md6:"",xs12:"","pa-2":""}},[r("v-text-field",{ref:"descriptionInput",attrs:{value:t.activeTimeEntry.description,placeholder:"Your task description goes here"},on:{blur:t.changeDescription,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.onDescriptionSubmit()}}})],1),r("v-flex",{attrs:{lg2:"",md6:"",xs12:"","pa-2":""}},[r("TimerProjectSelect",{attrs:{initialProject:t.activeTimeEntry.projectId},on:{projectChanged:t.onProjectChanged}})],1),r("v-flex",{attrs:{"lg-3":"","pa-2":""}},[r("v-layout",[r("v-flex",{attrs:{lg2:"","pt-2":""}},[r("BillableButton",{attrs:{initialBillableState:t.activeTimeEntry.billable},on:{billableChanged:t.onBillableStateChanged}})],1),r("v-flex",{attrs:{lg4:"","pt-4":""}},[r("DateTimeRangePicker",{attrs:{startedAt:t.activeTimeEntry.startedAt,rangeValidationStrategy:"allowEmptyEnd"},on:{rangeChanged:t.onTimeRangeChanged}},[r("TrackingBarTimer",{attrs:{slot:"activator"},slot:"activator"})],1)],1),r("v-flex",{attrs:{lg3:""}},[r("div",[t.isTimerStarted?t._e():r("v-btn",{attrs:{fab:"",dark:"",color:"teal"},on:{click:t.onStartButtonClick}},[r("v-icon",{attrs:{dark:""}},[t._v("play_arrow")])],1),t.isTimerStarted?r("v-btn",{attrs:{fab:"",dark:"",color:"pink"},on:{click:t.onStopButtonClick}},[r("v-icon",{attrs:{dark:""}},[t._v("stop")])],1):t._e()],1)]),r("v-flex",{attrs:{lg1:"","pt-2":"","pl-3":""}},[r("v-btn",{attrs:{flat:"",icon:"",color:"grey"},on:{click:t.deleteActiveTimer}},[r("v-icon",[t._v("delete")])],1)],1)],1)],1)],1)],1)],1)],1)},$e=[],Be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("input",{directives:[{name:"model",rawName:"v-model",value:t.durationFormatted,expression:"durationFormatted"}],staticClass:"timer__time",attrs:{readonly:""},domProps:{value:t.durationFormatted},on:{input:function(e){e.target.composing||(t.durationFormatted=e.target.value)}}})},Ne=[],Le={name:"TrackingBarTimer",data:function(){return{interval:null,duration:this.$moment.duration(0),TICK_INTERVAL:500}},mounted:function(){this.interval=setInterval(this.updateClocksDuration,this.TICK_INTERVAL)},destroyed:function(){clearInterval(this.interval)},computed:{CLOCK_INTERVAL:function(){return 1e3},durationFormatted:function(){return this.duration.format("hh:mm:ss",{trim:!1})},startedAt:function(){return this.$store.getters["timers/activeTimeEntry"].startedAt}},methods:{updateClocksDuration:function(){if(this.startedAt){var t=this.$moment(),e=this.$moment(this.startedAt);this.duration=this.$moment.duration(t-e,"milliseconds")}else this.duration=this.$moment.duration(0)}}},ze=Le,Ue=Object(p["a"])(ze,Be,Ne,!1,null,null,null);Ue.options.__file="TrackingBarTimer.vue";var Ye=Ue.exports,We=(r("c637"),{name:"TrackingBar",components:{TrackingBarTimer:Ye,TimerProjectSelect:pe,BillableButton:be,DateTimeRangePicker:Oe},data:function(){return{localBillable:null,localProjectId:null}},computed:Object(jt["a"])({},Object(At["c"])({activeTimeEntry:"timers/activeTimeEntry"}),{isTimerStarted:function(){return this.activeTimeEntry&&this.activeTimeEntry.startedAt}}),methods:Object(jt["a"])({},Object(At["d"])({updateTimeEntryOnlyLocaly:"timers/updateTimeEntry"}),Object(At["b"])({deleteTimeEntry:"timers/deleteTimeEntry",start:"timers/createTimeEntry",updateTimeEntryOnServer:"timers/updateTimeEntry"}),{updateTimeEntry:function(t){this.isTimerStarted?this.updateTimeEntryOnServer(t):this.updateTimeEntryOnlyLocaly(t)},changeDescription:function(t){var e=Object(jt["a"])({},this.activeTimeEntry,{description:t.target.value});this.updateTimeEntry(e)},onDescriptionSubmit:function(){if(!this.isTimerStarted){var t=Object(jt["a"])({},this.activeTimeEntry,{startedAt:(new Date).toISOString()});this.start(t)}},onProjectChanged:function(t){var e=Object(jt["a"])({},this.activeTimeEntry,{projectId:t});this.updateTimeEntry(e)},onBillableStateChanged:function(t){var e=Object(jt["a"])({},this.activeTimeEntry,{billable:t});this.updateTimeEntry(e)},onTimeRangeChanged:function(t){var e=t.startedAt,r=t.endedAt,n=Object(jt["a"])({},this.activeTimeEntry,{startedAt:e,stoppedAt:r});this.isTimerStarted?this.updateTimeEntry(n):this.start(n)},onStartButtonClick:function(){var t=Object(jt["a"])({},this.activeTimeEntry,{startedAt:(new Date).toISOString()});this.start(t)},onStopButtonClick:function(){var t=Object(jt["a"])({},this.activeTimeEntry,{stoppedAt:(new Date).toISOString()});this.updateTimeEntry(t)},deleteActiveTimer:function(){this.deleteTimeEntry(this.activeTimeEntry.id)}})}),Fe=We,Ve=Object(p["a"])(Fe,Ie,$e,!1,null,null,null);Ve.options.__file="TrackingBar.vue";var Ge=Ve.exports,He={name:"Timer",components:{TimerList:Ce,TrackingBar:Ge}},qe=He,Je=Object(p["a"])(qe,Gt,Ht,!1,null,null,null);Je.options.__file="TimerListDesktop.vue";var Ke=Je.exports,Xe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("v-card",[t._l(t.timeEntryGroups,function(t,e){return r("div",{key:e},[r("TimerListGroup",{attrs:{"two-line":"",subheader:"",timeEntriesDate:e,timeEntries:t}}),r("v-divider")],1)}),r("v-btn",{attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:t.createNewTimer}},[r("v-icon",[t._v("add")])],1)],2)],1)],1)},Qe=[],Ze=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list",{attrs:{"two-line":"",subheader:""}},[r("v-subheader",[t._v(t._s(t.timeEntriesDate))]),t._l(t.timeEntries,function(e,n){return[r("TimerListItem",{key:e.id,attrs:{timeEntry:e}}),n+1<t.timeEntries.length?r("v-divider",{key:n}):t._e()]})],2)},tr=[],er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-link",{attrs:{to:{name:"timer-item",params:{id:t.timeEntry.id}}}},[r("v-list-tile",{key:t.timeEntry.description,attrs:{route:"",avatar:"",ripple:""}},[r("v-list-tile-content",{ref:"timeEntryContent"},[r("v-list-tile-title",[t._v(t._s(t.timeEntry.description))]),r("v-list-tile-sub-title",{staticClass:"text--primary"},[t._v(t._s(t.timeEntry.projectName))])],1),r("v-list-tile-action",[r("v-list-tile-action-text",{staticClass:"font-weight-bold"},[t._v(t._s(t.timeEntry.getDurationText())+" ")]),r("v-btn",{attrs:{color:"teal",outline:"",fab:"",small:"",dark:""}},[r("v-icon",[t._v(" play_arrow ")])],1)],1)],1)],1)},rr=[],nr=(r("c8b5"),{props:["timeEntry"],data:function(){return{swipeManager:null}},mounted:function(){this.initTimeEntrySwipe()},methods:{initTimeEntrySwipe:function(){var t=this.$refs.timeEntryContent;this.swipeManager=new Hammer.Manager(this.$el);var e=new Hammer.Swipe;this.swipeManager.add(e);var r=0,n="translate3d(0px, 0, 0)",a="translate3d(150px, 0, 0)";this.swipeManager.on("swipe",function(e){r+=e.deltaX;var i=e.offsetDirection;4!==i&&2!==i||(r>150?(t.style.transform=a,console.log("init delete",r)):setTimeout(function(){t.style.transform=n},100))})}}}),ar=nr,ir=Object(p["a"])(ar,er,rr,!1,null,null,null);ir.options.__file="TimerListItem.vue";var sr=ir.exports,or={components:{TimerListItem:sr},props:["timeEntriesDate","timeEntries"]},cr=or,ur=Object(p["a"])(cr,Ze,tr,!1,null,null,null);ur.options.__file="TimerListGroup.vue";var lr=ur.exports,pr={components:{TimerListGroup:lr},data:function(){return{selected:[2]}},computed:Object(jt["a"])({},Object(At["c"])({stoppedTimeEntries:"timers/stoppedTimeEntries"}),{timeEntryGroups:function(){var t=this;return this.$_.groupBy(this.stoppedTimeEntries,function(e){var r=t.$moment(e.startedAt).clone().startOf("day").format("ddd, D MMM"),n=t.$moment().startOf("day").format("ddd, D MMM"),a=t.$moment().subtract(1,"day").startOf("day").format("ddd, D MMM");return r==n?"Today":r==a?"Yesterday":t.$moment(e.startedAt).format("ddd, D MMM")})}}),methods:Object(jt["a"])({},Object(At["b"])({createTimeEntry:"timers/createTimeEntry"}),{requestNotificationPermitions:function(){Notification&&"granted"!==Notification.permission&&Notification.requestPermission().then(function(t){"granted"===t&&$t.createSubscription()})},createNewTimer:function(){var t=this;this.createTimeEntry({}).then(function(e){t.$router.push({name:"timer-item",params:{id:e.id}})})}}),created:function(){Lt.isPromptAllowed()&&Lt.showPrompt(),this.requestNotificationPermitions()}},dr=pr,mr=Object(p["a"])(dr,Xe,Qe,!1,null,null,null);mr.options.__file="TimerListMobile.vue";var fr=mr.exports,hr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{sm12:""}},[t.timeEntry?r("form",[r("v-text-field",{attrs:{label:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),r("v-autocomplete",{attrs:{items:t.projects,"item-text":"name","item-value":"id","menu-props":"auto",clearable:!0,placeholder:"No project"},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}}),r("v-checkbox",{attrs:{label:"Billable",type:"checkbox"},model:{value:t.billable,callback:function(e){t.billable=e},expression:"billable"}}),r("v-dialog",{ref:"dateDialog",attrs:{"return-value":t.startDate,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){t.startDate=e}},model:{value:t.datePickerModal,callback:function(e){t.datePickerModal=e},expression:"datePickerModal"}},[r("v-text-field",{attrs:{slot:"activator",label:"Timer date","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t.datePickerModal?r("v-date-picker",{attrs:{"full-width":""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.datePickerModal=!1}}},[t._v("Cancel")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.dateDialog.save(t.startDate)}}},[t._v("OK")])],1):t._e()],1),r("v-dialog",{ref:"startedAtDialog",attrs:{"return-value":t.startTime,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){t.startTime=e}},model:{value:t.startPickerModal,callback:function(e){t.startPickerModal=e},expression:"startPickerModal"}},[r("v-text-field",{attrs:{slot:"activator",label:"Start time","prepend-icon":"access_time",readonly:""},slot:"activator",model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t.startPickerModal?r("v-time-picker",{attrs:{"full-width":"",format:"24hr"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}},[r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.startPickerModal=!1}}},[t._v("Cancel")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.startedAtDialog.save(t.startTime)}}},[t._v("OK")])],1):t._e()],1),r("v-dialog",{ref:"stoppedAtDialog",attrs:{"return-value":t.stopTime,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){t.stopTime=e}},model:{value:t.stopPickerModal,callback:function(e){t.stopPickerModal=e},expression:"stopPickerModal"}},[r("v-text-field",{attrs:{slot:"activator",label:"Stop time","prepend-icon":"access_time",readonly:""},slot:"activator",model:{value:t.stopTime,callback:function(e){t.stopTime=e},expression:"stopTime"}}),t.stopPickerModal?r("v-time-picker",{attrs:{"full-width":"",format:"24hr"},model:{value:t.stopTime,callback:function(e){t.stopTime=e},expression:"stopTime"}},[r("v-spacer"),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.stopPickerModal=!1}}},[t._v("Cancel")]),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.stoppedAtDialog.save(t.stopTime)}}},[t._v("OK")])],1):t._e()],1),r("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("submit")]),r("v-btn",{attrs:{"router-link":"",to:{name:"timer-list"}}},[t._v("back")])],1):r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),r("v-snackbar",{attrs:{bottom:!0,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n      Time entry saved\n      "),r("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" Close ")])],1)],1)],1)},vr=[],br={data:function(){return{snackbar:!1,description:"",projectId:"",startTime:"",stopTime:"",startDate:"",billable:!1,startPickerModal:!1,stopPickerModal:!1,datePickerModal:!1}},computed:Object(jt["a"])({},Object(At["c"])({projects:"projects/projects",timeEntry:"timers/currentTimeEntry"})),created:function(){this.fetchTimeEntryFromRoute()},watch:{$route:"fetchTimeEntryFromRoute",timeEntry:function(t,e){t&&(this.startTime=t.startedAtTime24()||this.$moment().format("HH:mm"),this.startDate=t.startDate()||this.$moment().format("YYYY-MM-DD"),this.stopTime=t.stoppedAtTime24(),this.billable=t.billable,this.description=t.description,this.projectId=t.projectId)}},methods:Object(jt["a"])({},Object(At["b"])({fetchCurrentTimeEntry:"timers/fetchCurrentTimeEntry",updateTimeEntry:"timers/updateTimeEntry"}),{fetchTimeEntryFromRoute:function(){this.fetchCurrentTimeEntry(this.$route.params.id)},submit:function(){var t=this;this.updateTimeEntry({id:this.timeEntry.id,description:this.description,billable:this.billable,projectId:this.projectId,startedAt:this.$moment(this.startDate+" "+this.startTime).toISOString(),stoppedAt:""==this.stopTime?null:this.$moment(this.startDate+" "+this.stopTime).toISOString()}).then(function(e){return t.snackbar=!0})}})},gr=br,jr=Object(p["a"])(gr,hr,vr,!1,null,null,null);jr.options.__file="TimerMobile.vue";var yr,kr=jr.exports,xr=function(){function t(){Object(S["a"])(this,t)}return Object(D["a"])(t,[{key:"isMobile",value:function(){return!0}}]),t}(),wr=new xr;yr=wr.isMobile()?[{path:"timer",component:fr,name:"timer-list"},{path:"timer/:id",name:"timer-item",component:kr}]:[{path:"timer",component:Ke,name:"timer-list"}];var _r=yr,Tr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",{attrs:{c:""}},[t._v("Projects")]),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.projects,search:t.search,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[r("td",[t._v(t._s(e.item.name))]),r("td",{staticClass:"justify-center layout px-0"},[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(r){t.editItem(e.item)}}},[t._v("\n            edit\n          ")]),r("v-icon",{attrs:{small:""},on:{click:function(r){t.deleteItem(e.item)}}},[t._v("\n            delete\n          ")])],1)]}}])}),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-btn",{attrs:{slot:"activator",color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},slot:"activator"},[r("v-icon",[t._v("add")])],1),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("Save")])],1)],1)],1)],1),r("v-snackbar",{attrs:{bottom:!0,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n    "),r("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n      Close\n    ")])],1)],1)},Or=[],Er=(r("20d6"),{data:function(){return{dialog:!1,snackbar:!1,snackbarText:"",search:"",headers:[{text:"Name",align:"left",sortable:!0,value:"name"},{text:"Actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""}}},computed:Object(jt["a"])({},Object(At["c"])({projects:"projects/projects"}),{formTitle:function(){return-1===this.editedIndex?"New Project":"Edit Project"}}),methods:Object(jt["a"])({},Object(At["b"])({updateProject:"projects/updateProject",deleteProject:"projects/deleteProject",createProject:"projects/createProject"}),{editItem:function(t){this.editedIndex=this.projects.findIndex(function(e){return t.id==e.id}),this.editedItem=Object(jt["a"])({},t),this.dialog=!0},deleteItem:function(t){confirm("Are you sure you want to delete this item?")&&this.deleteProject(t.id)},close:function(){this.dialog=!1,this.editedItem=this.defaultItem,this.snackbar=!0},save:function(){this.editedIndex>-1?(this.snackbarText="Project updated",this.updateProject(this.editedItem)):(this.snackbarText="Project created",this.createProject(this.editedItem)),this.close()}})}),Sr=Er,Dr=Object(p["a"])(Sr,Tr,Or,!1,null,null,null);Dr.options.__file="Projects.vue";var Rr=Dr.exports,Pr=[{path:"projects",component:Rr,name:"projects"}],Ar=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("ReportFilter")],1),r("v-divider"),t.reportData?r("v-flex",{attrs:{xs12:""}},[r("ReportData")],1):t._e()],1)},Mr=[],Cr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{lg3:"",md3:"",xs12:"","px-2":""}},[r("v-select",{attrs:{items:t.users,"item-text":"name","item-value":"id",label:"Select",multiple:"",autocomplete:"","max-height":"400",hint:"Pick team","persistent-hint":""},model:{value:t.filter.team,callback:function(e){t.$set(t.filter,"team",e)},expression:"filter.team"}})],1),r("v-flex",{attrs:{lg3:"",md3:"",xs12:"","px-2":""}},[r("v-select",{attrs:{items:t.projects,"item-text":"name","item-value":"id",label:"Select",multiple:"",autocomplete:"","max-height":"400",hint:"Pick project","persistent-hint":""},model:{value:t.filter.projects,callback:function(e){t.$set(t.filter,"projects",e)},expression:"filter.projects"}})],1),r("v-flex",{attrs:{lg3:"",md5:"",xs12:"","px-2":""}},[r("DateRangePicker",{attrs:{dateRange:t.filter.dateRange}})],1),r("v-flex",{attrs:{lg2:""}},[r("v-select",{attrs:{items:t.billableOptions,"item-text":"name","item-value":"value",label:"Select","max-height":"400",hint:"Set billable","persistent-hint":""},model:{value:t.filter.billable,callback:function(e){t.$set(t.filter,"billable",e)},expression:"filter.billable"}})],1),r("v-flex",{attrs:{lg1:"",md1:"",xs12:""}},[r("v-btn",{attrs:{color:"info"},on:{click:function(e){t.fetchSummaryReportWIthFilter(t.filter)}}},[t._v("Apply")])],1)],1)},Ir=[],$r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",[r("v-flex",{attrs:{md6:"",sm6:"",xs12:""}},[r("v-menu",{ref:"startDateMenu",attrs:{"close-on-content-click":!1,"return-value":t.dateRange.start,"nudge-right":40,transition:"scale-transition","min-width":"290px","full-width":"","offset-y":"",lazy:""},on:{"update:returnValue":function(e){t.$set(t.dateRange,"start",e)}},model:{value:t.isStartDateMenuOpened,callback:function(e){t.isStartDateMenuOpened=e},expression:"isStartDateMenuOpened"}},[r("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",label:"Date",readonly:""},slot:"activator",model:{value:t.dateRange.start,callback:function(e){t.$set(t.dateRange,"start",e)},expression:"dateRange.start"}}),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{change:function(e){t.$refs.startDateMenu.save(t.dateRange.start)}},model:{value:t.dateRange.start,callback:function(e){t.$set(t.dateRange,"start",e)},expression:"dateRange.start"}})],1)],1),r("v-flex",{attrs:{md6:"",sm6:"",xs12:""}},[r("v-menu",{ref:"endDateMenu",attrs:{"close-on-content-click":!1,"return-value":t.dateRange.end,"nudge-right":40,transition:"scale-transition","min-width":"290px","full-width":"","offset-y":"",lazy:""},on:{"update:returnValue":function(e){t.$set(t.dateRange,"end",e)}},model:{value:t.isEndDateMenuOpened,callback:function(e){t.isEndDateMenuOpened=e},expression:"isEndDateMenuOpened"}},[r("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",label:"Date",readonly:""},slot:"activator",model:{value:t.dateRange.end,callback:function(e){t.$set(t.dateRange,"end",e)},expression:"dateRange.end"}}),r("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{change:function(e){t.$refs.endDateMenu.save(t.dateRange.end)}},model:{value:t.dateRange.end,callback:function(e){t.$set(t.dateRange,"end",e)},expression:"dateRange.end"}})],1)],1)],1)},Br=[],Nr={props:["dateRange"],data:function(){return{isStartDateMenuOpened:!0,isEndDateMenuOpened:!0}}},Lr=Nr,zr=Object(p["a"])(Lr,$r,Br,!1,null,null,null);zr.options.__file="DateRangePicker.vue";var Ur=zr.exports,Yr={components:{DateRangePicker:Ur},data:function(){return{billableOptions:[{name:"Billable",value:!0},{name:"Non-billable",value:!1},{name:"Both",value:null}]}},computed:Object(jt["a"])({},Object(At["c"])({users:"reports/users",currentUser:"auth/currentUser",projects:"projects/projects"}),{filter:function(){return this.$_.cloneDeep(this.$store.getters["reports/reportFilter"])}}),created:function(){this.initDefaultFilterParams(),this.fetchSummaryReportWIthFilter(this.filter)},methods:Object(jt["a"])({},Object(At["b"])({fetchSummaryReportWIthFilter:"reports/fetchSummaryReportWIthFilter"}),{initDefaultFilterParams:function(){this.filter.team=[this.currentUser.id],this.filter.dateRange.start=this.$moment().startOf("isoWeek").format("YYYY-MM-DD"),this.filter.dateRange.end=this.$moment().endOf("isoWeek").format("YYYY-MM-DD")}})},Wr=Yr,Fr=Object(p["a"])(Wr,Cr,Ir,!1,null,null,null);Fr.options.__file="ReportFilter.vue";var Vr=Fr.exports,Gr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-layout",{attrs:{raw:"",wrap:""}},[r("v-flex",{attrs:{xs3:"","px-2":""}},[r("v-select",{attrs:{items:t.groupOptions,"item-text":"title","item-value":"value",label:"Group by","max-height":"400"},model:{value:t.reportGrouping.groupBy,callback:function(e){t.$set(t.reportGrouping,"groupBy",e)},expression:"reportGrouping.groupBy"}})],1),r("v-flex",{attrs:{xs3:"","px-2":""}},[r("v-select",{attrs:{items:t.subgroupOptions,"item-text":"title","item-value":"value",label:"Subgroup by","max-height":"400"},model:{value:t.reportGrouping.subgroupBy,callback:function(e){t.$set(t.reportGrouping,"subgroupBy",e)},expression:"reportGrouping.subgroupBy"}})],1)],1),r("div",[t._v(t._s(JSON.stringify(t.reportData)))])],1)},Hr=[],qr={data:function(){return{groupOptions:[{title:"Project",value:"project"},{title:"User",value:"user"}],subgroupOptions:[{title:"Time Entry",value:"time_entry"}]}},computed:Object(jt["a"])({},Object(At["c"])({reportData:"reports/reportData"}),{reportGrouping:function(){return this.$_.cloneDeep(this.$store.getters["reports/reportGrouping"])}})},Jr=qr,Kr=Object(p["a"])(Jr,Gr,Hr,!1,null,null,null);Kr.options.__file="ReportData.vue";var Xr=Kr.exports,Qr={name:"Reports",components:{ReportFilter:Vr,ReportData:Xr},computed:Object(jt["a"])({},Object(At["c"])({reportData:"reports/reportData"})),methods:Object(jt["a"])({},Object(At["b"])({fetchUsers:"reports/fetchWorkspaceUsers"})),created:function(){this.fetchUsers()}},Zr=Qr,tn=Object(p["a"])(Zr,Ar,Mr,!1,null,null,null);tn.options.__file="Reports.vue";var en=tn.exports,rn=[{path:"/reports",component:en,name:"reports"}],nn={path:"/app",component:Wt,beforeEnter:Vt,children:Object(vt["a"])(Pr).concat(Object(vt["a"])(rn),Object(vt["a"])(_r))};a["default"].use(f["a"]);var an=[{path:"/",component:j,children:[ht,K]},{path:"*",component:T},nn];console.log(an);var sn,on,cn,un=new f["a"]({mode:"history",routes:an}),ln=un,pn=(r("7514"),r("a322")),dn="SET_TIME_ENTRIES",mn="updateTimeEntry",fn="DELETE_TIME_ENTRY",hn="ADD_TIME_ENTRY",vn="SET_CURRENT_TIME_ENTRY",bn=(r("f751"),r("2ef0")),gn=(r("ac6a"),r("dc0a")),jn=r("d328"),yn=r("11d9"),kn=r("b8d7"),xn=function(t){function e(t,r){var n;return Object(S["a"])(this,e),n=Object(jn["a"])(this,Object(yn["a"])(e).call(this,t)),n.cacheStore=r,n}return Object(D["a"])(e,[{key:"getAll",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(kn["a"])(Object(yn["a"])(e.prototype),"getAll",this).call(this);case 3:return r=t.sent,r.forEach(function(t){t.unsynced=!1,n.cacheStore.write(t)}),t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",this.cacheStore.readAllData());case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(kn["a"])(Object(yn["a"])(e.prototype),"get",this).call(this,r);case 3:return n=t.sent,n.unsynced=!1,this.cacheStore.write(n),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",this.cacheStore.read(r));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(kn["a"])(Object(yn["a"])(e.prototype),"post",this).call(this,r);case 2:return n=t.sent,n.unsynced=!1,this.cacheStore.write(n),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"put",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(kn["a"])(Object(yn["a"])(e.prototype),"put",this).call(this,r,n);case 2:return a=t.sent,a.unsynced=!1,this.cacheStore.write(a),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(kn["a"])(Object(yn["a"])(e.prototype),"delete",this).call(this,r);case 2:return n=t.sent,this.cacheStore.delete(r),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),Object(gn["a"])(e,t),e}(U),wn=r("c64e"),_n=function(t){function e(t,r,n){var a;return Object(S["a"])(this,e),a=Object(jn["a"])(this,Object(yn["a"])(e).call(this,t,r)),a.resourceSyncTaskName=n.getName(),a.resourceSyncStore=n,a}return Object(D["a"])(e,[{key:"post",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=Object(jt["a"])({},r,{id:wn()}),!navigator.onLine){t.next=6;break}return t.next=4,Object(kn["a"])(Object(yn["a"])(e.prototype),"post",this).call(this,n);case 4:t.next=11;break;case 6:return n.unsynced=!0,t.next=9,this.cacheStore.write(n);case 9:return t.next=11,this.registerSyncTaskWithOperationsSyncronozation(n,"create");case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"put",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=Object(jt["a"])({},n,{id:r}),!navigator.onLine){t.next=6;break}return t.next=4,Object(kn["a"])(Object(yn["a"])(e.prototype),"put",this).call(this,r,a);case 4:t.next=11;break;case 6:return a.unsynced=!0,t.next=9,this.cacheStore.write(a);case 9:return t.next=11,this.registerSyncTaskWithOperationsSyncronozation(a,"update");case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!navigator.onLine){t.next=5;break}return t.next=3,Object(kn["a"])(Object(yn["a"])(e.prototype),"delete",this).call(this,r);case 3:t.next=9;break;case 5:return t.next=7,this.cacheStore.delete(r);case 7:return t.next=9,this.registerSyncTaskWithOperationsSyncronozation({id:r},"delete");case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"registerSyncTaskWithOperationsSyncronozation",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.id,data:e,operationType:null},t.next=3,navigator.serviceWorker.ready;case 3:a=t.sent,t.t0=r,t.next="create"===t.t0?7:"update"===t.t0?12:"delete"===t.t0?20:33;break;case 7:return n.operationType="create",t.next=10,this.resourceSyncStore.write(n);case 10:return a.sync.register(this.resourceSyncTaskName),t.abrupt("break",34);case 12:return t.next=14,this.resourceSyncStore.read(e.id);case 14:return i=t.sent,i&&"create"===i.operationType?n.operationType="create":n.operationType="update",t.next=18,this.resourceSyncStore.write(n);case 18:return a.sync.register(this.resourceSyncTaskName),t.abrupt("break",34);case 20:return t.next=22,this.resourceSyncStore.read(e.id);case 22:if(s=t.sent,!s||"create"!=s.operationType){t.next=28;break}return t.next=26,this.resourceSyncStore.delete(n.id);case 26:t.next=32;break;case 28:return n.operationType="delete",t.next=31,this.resourceSyncStore.write(n);case 31:a.sync.register(this.resourceSyncTaskName);case 32:return t.abrupt("break",34);case 33:return t.abrupt("break",34);case 34:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}]),Object(gn["a"])(e,t),e}(xn),Tn="twork-store",On="time-entries",En="sync-time-entries",Sn=[On,En],Dn=function(){function t(e){if(Object(S["a"])(this,t),!Sn.find(function(t){return t===e}))throw e+" should be added to the initialization list inside TworkIndexedDBStore";this.objectStoreName=e}return Object(D["a"])(t,null,[{key:"initStores",value:function(){return P.a.open(Tn,1,function(t){Sn.forEach(function(e){t.objectStoreNames.contains(e)||t.createObjectStore(e,{keyPath:"id"})})})}}]),Object(D["a"])(t,[{key:"getName",value:function(){return this.objectStoreName}},{key:"write",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.a.open(Tn);case 2:return r=t.sent,n=r.transaction(this.objectStoreName,"readwrite"),a=n.objectStore(this.objectStoreName),t.next=7,a.put(e);case 7:return t.abrupt("return",n.complete);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.a.open(Tn);case 3:return r=t.sent,n=r.transaction(this.objectStoreName,"readonly"),a=n.objectStore(this.objectStoreName),t.abrupt("return",a.get(e));case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.a.open(Tn);case 3:return r=t.sent,n=r.transaction(this.objectStoreName,"readwrite"),a=n.objectStore(this.objectStoreName),a.delete(e),t.abrupt("return",n.complete);case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"readAllData",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.init();case 3:return e=t.sent,r=e.transaction(this.objectStoreName,"readonly"),n=r.objectStore(this.objectStoreName),t.abrupt("return",n.getAll());case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}()}]),t}(),Rn=Dn,Pn="/time_entries",An=function(){if("indexedDB"in window&&N.isProduction){var t=new Rn(On);if("serviceWorker"in navigator&&"SyncManager"in window){var e=new Rn(En);return new _n(Pn,t,e)}return new xn(Pn,t)}return new U(Pn)}(),Mn=An,Cn={fetchTimeEntries:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Mn.getAll();case 3:n=t.sent,r(dn,n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetchCurrentTimeEntry:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,t.next=3,Mn.get(r);case 3:return a=t.sent,n(vn,a),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),createTimeEntry:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=Object.assign(r,{workspaceId:V.getCurrentWorkspaceId()}),t.next=4,Mn.post(a);case 4:return i=t.sent,n(hn,i),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),updateTimeEntry:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Mn.put(r.id,r);case 3:return a=t.sent,n(mn,a),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),deleteTimeEntry:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.delete(r);case 2:e.commit(fn,r);case 3:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},In=function(){function t(e){Object(S["a"])(this,t),Object.assign(this,e)}return Object(D["a"])(t,null,[{key:"buildEmpty",value:function(){return new t({startedAt:null,stoppedAt:null,description:"",project:null,billable:!1})}}]),Object(D["a"])(t,[{key:"isStarted",value:function(){return!!this.startedAt}},{key:"isStopped",value:function(){return this.isStarted()&&!!this.stoppedAt}},{key:"unixTimestamp",value:function(){return Zt()(this.stoppedAt).format("X")}},{key:"startedAtTime",value:function(){return this.startedAt&&Zt()(this.startedAt).format("hh:mm A")}},{key:"startedAtTime24",value:function(){return this.startedAt&&Zt()(this.startedAt).format("HH:MM")}},{key:"stoppedAtTime",value:function(){return this.stoppedAt&&Zt()(this.stoppedAt).format("hh:mm A")}},{key:"stoppedAtTime24",value:function(){return this.stoppedAt&&Zt()(this.stoppedAt).format("HH:MM")}},{key:"startDate",value:function(){return this.startedAt&&Zt()(this.startedAt).format("YYYY-MM-DD")}},{key:"stopDate",value:function(){return this.stoppedAt&&Zt()(this.stoppedAt).format("YYYY-MM-DD")}},{key:"duration",value:function(){return Zt.a.duration(Zt()(this.stoppedAt)-Zt()(this.startedAt))}},{key:"getDurationText",value:function(){return this.duration().format("hh:mm:ss",{trim:!1})}}]),t}(),$n={timeEntries:[],currentTimeEntry:null,emptyTimeEntry:In.buildEmpty()},Bn=(sn={},Object(pn["a"])(sn,dn,function(t,e){t.timeEntries=e}),Object(pn["a"])(sn,hn,function(t,e){t.timeEntries.unshift(e)}),Object(pn["a"])(sn,mn,function(t,e){var r=bn["findIndex"](t.timeEntries,{id:e.id});t.timeEntries.splice(r,1,e)}),Object(pn["a"])(sn,fn,function(t,e){var r=bn["findIndex"](t.timeEntries,{id:e});t.timeEntries.splice(r,1)}),Object(pn["a"])(sn,vn,function(t,e){t.currentTimeEntry=e}),sn),Nn={timeEntries:function(){return null==$n.timeEntries?null:bn["map"]($n.timeEntries,function(t){return new In(t)})},stoppedTimeEntries:function(t){return bn["map"](bn["orderBy"](bn["filter"](t.timeEntries,function(t){return t.stoppedAt}),function(t){return new Date(t.startedAt)},"desc"),function(t){return new In(t)})},currentTimeEntry:function(){return $n.currentTimeEntry&&new In($n.currentTimeEntry)},activeTimeEntry:function(t){var e=bn["find"](t.timeEntries,function(t){return!t.stoppedAt});return e&&new In(e)||t.emptyTimeEntry}},Ln={namespaced:!0,state:$n,mutations:Bn,actions:Cn,getters:Nn},zn="UPDATE",Un="DELETE",Yn="SET_PROJECTS",Wn="ADD",Fn=new U("/projects"),Vn={fetchProjects:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fn.getAll();case 2:r=t.sent,e.commit(Yn,r);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteProject:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fn.delete(r,{workspaceId:V.getCurrentWorkspaceId()});case 2:n=t.sent,e.commit(Un,n.id);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),createProject:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(jt["a"])({},r,{workspaceId:V.getCurrentWorkspaceId()}),t.next=3,Fn.post(n);case 3:a=t.sent,e.commit(Wn,a);case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),updateProject:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fn.put(r.id,r);case 2:n=t.sent,e.commit(zn,n);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},Gn=(r("7f7f"),function(){function t(e){Object(S["a"])(this,t),this.name=e.name,this.workspaceId=e.workspaceId,this.id=e.id}return Object(D["a"])(t,null,[{key:"buildEmpty",value:function(){return new t({name:"",workspace:""})}}]),Object(D["a"])(t,[{key:"clone",value:function(){return new this.constructor(this)}}]),t}()),Hn={projects:[]},qn=(on={},Object(pn["a"])(on,Yn,function(t,e){t.projects=e}),Object(pn["a"])(on,Un,function(t,e){var r=bn["findIndex"](t.projects,{id:e});t.projects.splice(r,1)}),Object(pn["a"])(on,Wn,function(t,e){t.projects.unshift(new Gn(e))}),Object(pn["a"])(on,zn,function(t,e){var r=bn["findIndex"](t.projects,{id:e.id});t.projects.splice(r,1,e)}),on),Jn={projects:function(t){return bn["map"](t.projects,function(t){return new Gn(t)})}},Kn={namespaced:!0,state:Hn,mutations:qn,actions:Vn,getters:Jn},Xn="SET_USERS",Qn="SET_FILTER",Zn="SET_REPORT_DATA",ta="/workspaces",ea="/reports",ra={users:[],reportFilter:{team:[],projects:[],billable:null,dateRange:{start:null,end:null}},reportGrouping:{groupBy:null,subgroupBy:null},reportData:null},na=(cn={},Object(pn["a"])(cn,Xn,function(t,e){t.users=e}),Object(pn["a"])(cn,Qn,function(t,e){t.reportFilter=e}),Object(pn["a"])(cn,Zn,function(t,e){t.reportData=e}),cn),aa={users:function(t){return t.users},reportFilter:function(t){return t.reportFilter},reportGrouping:function(t){return t.reportGrouping},reportData:function(t){return t.reportData}},ia={fetchWorkspaceUsers:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var r,n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.state,n=e.rootGetters,i=n["auth/currentWorkspaceId"],t.next=4,a["default"].axios.get("".concat(ta,"/").concat(i,"/users"));case 4:s=t.sent,r(Xn,s.data);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetchSummaryReportWIthFilter:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,r){var n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n(Qn,r),i=Object.assign(r,{start:r.dateRange.start,end:r.dateRange.end}),t.next=5,a["default"].axios.get("".concat(ea,"/summary"),{params:i});case 5:s=t.sent,n(Zn,s.data);case 7:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},sa={namespaced:!0,state:ra,mutations:na,actions:ia,getters:aa},oa={timers:Ln,projects:Kn,reports:sa};a["default"].use(At["a"]);var ca=new At["a"].Store({modules:Object(jt["a"])({},oa),strict:!0}),ua=r("9483");Object(ua["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var la=r("219c"),pa=(r("bf40"),{store:ca,install:function(t){t.prototype.$store=ca}}),da={lodash:bn,install:function(t){t.prototype.$_=bn}},ma={moment:Zt.a,install:function(t){t.prototype.$moment=Zt.a}},fa="ontouchstart"in window||navigator.msMaxTouchPoints>0,ha={instances:[],events:fa?["touchstart","click"]:["click"],onEvent:function(t){ha.instances.forEach(function(e){var r=e.el,n=e.fn;t.target===r||r.contains(t.target)||n&&n(t)})},bind:function(t,e){ha.instances.push({el:t,fn:e.value}),1===ha.instances.length&&ha.events.forEach(function(t){return document.addEventListener(t,ha.onEvent)})},update:function(t,e){if("function"!==typeof e.value)throw new Error("Argument must be a function");var r=ha.instances.find(function(e){return e.el===t});r.fn=e.value},unbind:function(t){var e=ha.instances.findIndex(function(e){return e.el===t});e>=0&&ha.instances.splice(e,1),0===ha.instances.length&&ha.events.forEach(function(t){return document.removeEventListener(t,ha.onEvent)})}},va="undefined"!==typeof window?ha:{};a["default"].use(s.a),a["default"].use(ma),a["default"].use(da),a["default"].use(pa),a["default"].use(la),a["default"].directive("click-outside",va),a["default"].config.productionTip=!1;var ba=function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(Lt.initBeforeInstallPromptListener(),!("indexedDB"in window)){t.next=4;break}return t.next=4,Rn.initStores();case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();new a["default"]({router:ln,store:ca,render:function(t){return t(m)},created:ba}).$mount("#app")},"621d":function(t,e,r){},a5d2:function(t,e,r){"use strict";var n=r("2a44"),a=r.n(n);a.a},c637:function(t,e,r){t.exports=r.p+"img/trash.3717ce2f.svg"},fa7c:function(t,e,r){}});
//# sourceMappingURL=app.ac42275f.js.map